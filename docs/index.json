[{"categories":["make"],"contents":"It is a simple template that i use frequently to initiate projects with Makefile.\n1 2 3 4 5 6 7 8 9 10 11 12 13 .PHONY: help # Show this help. help: @awk \u0026#39;/^#/{c=substr($$0,3);next}c\u0026amp;\u0026amp;/^\\[\\[:alpha:\\]\\]\\[\\[:alnum:\\]\\_-\\]+:/{print substr($$1,1,index($$1,\u0026#34;:\u0026#34;)),c}1{c=0}\u0026#39; $(MAKEFILE\\_LIST) | column -s: -t # Turn on docker-compose environment. up: @docker-compose up -d # Turn on docker-compose environment. down: @docker-compose down -d It use a help recipe in Make that process the comments on top of each task, providing descriptions for tasks and allowing discovery from other that use the project.\nThen when some run make inside the project, will generate the following output:\n$ make help Show this help. up Turn on docker-compose environment. down Turn on docker-compose environment ","date":"Jan 31","permalink":"https://sergsoares.github.io/posts/2023-01-31-a-good-start-template-for-makefile/","tags":null,"title":"A good start template for Makefile"},{"categories":["learn"],"contents":"Looking at Hacker news, i saw a post call my attention.\nI rewrote in Crystal my tool to quickly create Kubernetes clusters in Hetzner\nAnd it called my attention for several factors:\nCreate tooling that envolve K8S.\nUsing a not too mainstream language (Crystal).\nA useful use case inside a real cloud vendor (Hetzner).\nI liked the insights that it give for me and the execution plan from the author, a lot of details need to be managed for the tool work.\nThe app use too configuration file, and take care of Idempotency (the main problema normally) and the update and delete operations for the created infrastructure.\nInspiring see that type of project\n","date":"Dec 31","permalink":"https://sergsoares.github.io/posts/2022-12-31-exploration-and-try-new-ideas-are-a-awesome-way-to-learn/","tags":null,"title":"Exploration and try new ideas are a awesome way to learn"},{"categories":["linux"],"contents":"Grep is an awesome linux app that is used for filtering text data, but sometimes we want more that only the lines of the match text.\ngrep -A 1 # got 1 line after match grep -B 1 # got 1 line before match grep -C 1 # got before and after ","date":"Sep 15","permalink":"https://sergsoares.github.io/posts/2022-09-15-show-more-lines-in-a-grep-filter/","tags":null,"title":"Show more lines in a grep filter."},{"categories":["eks","k8s","aws"],"contents":"Ap√≥s configura√ß√£o do cluster de Kubernetes usando o EKS e instala√ß√£o do metric server, ao se executar o comando para obter o uso de recursos atuais dos nodes, o seguinte erro aparece:\n$ kubectl top nodes error: metrics not available yet ... Ap√≥s verificar as issues do GitHub para entender melhor o cen√°rios, a mais relevante foi EKS v1.22 \u0026ldquo;Error from server (ServiceUnavailable): the server is currently unable to handle the request (get nodes.metrics.k8s.io) reproduzindo o mesmo cen√°rio.\nSeguindo o fluxo de troubleshooting recomendado foi poss√≠vel verificar o erro dentro do componente, onde o control plane n√£o consegue se comunicar com com a api de m√©tricas do node:\n$ kubectl get apiservices.apiregistration.k8s.io v1beta1.metrics.k8s.io ... $ kubectl describe apiservices v1beta1.metrics.k8s.io Message: failing or missing response from https://10.46.5.75:4443/apis/metrics.k8s.io/v1beta1: Get \u0026#34;https://10.46.5.75:4443/apis/metrics.k8s.io/v1beta1\u0026#34;: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) ... Ap√≥s confirmado, foi feito a libera√ß√£o para o Control Plane conseguir acessar a porta 4443 do Node Group via Security Group, resolvendo o problema e conseguindo obter as m√©tricas de nodes e pods.\n","date":"Sep 02","permalink":"https://sergsoares.github.io/posts/2022-09-02-problema-com-metric-server-no-eks/","tags":null,"title":"Metric server n√£o respondendo no EKS"},{"categories":["k8s"],"contents":"Muitas vezes precisamos copiar um secret do kubernetes de um namespace para outro, visto que n√£o temos a funcionalidade de secrets globais.\nPara isso podemos executar o camando abaixo, que exporta o manifesto de um secret, substitui o nome do namespace no manifesto e aplica no cluster novamente:\n1 kubectl get secret aws --namespace=namespace1 -o yaml | sed \u0026#39;s/namespace: .*/namespace: namespace2/\u0026#39; | kubectl apply -f - ","date":"Aug 16","permalink":"https://sergsoares.github.io/posts/2022-08-16-copiar-kubernetes-secret-entre-namespaces/","tags":null,"title":"Copiar kubernetes secret entre namespaces"},{"categories":["k8s"],"contents":"Um orquestrador √© um software desenvolvido para gerenciar containers em um ambiente distribu√≠do entre m√°quinas virtuais, sendo o componente de controle nesse cen√°rio distribu√≠do suas principais caracter√≠sticas s√£o:\nPermitir distribuir a carga de trabalho entre as diversas m√°quinas. Garantir que o ciclo de vida do container seja feito com sucesso (desde sua cria√ß√£o at√© finaliza√ß√£o). Manter a gest√£o dos recursos entre as diversas m√°quinas, permitindo que um container que n√£o tem recurso dispon√≠vel na m√°quina A seja criado na m√°quina B. Entre as op√ß√µes dispon√≠veis temos os orquestradores pr√≥prios das cloud\u0026rsquo;s como AWS ECS, Azure Container Instance e o Google Cloud Run.\nJ√° entre os orquestradores open source (que podem tamb√©m ter op√ß√µes gerenciadas na nuvem) temos o Kubernetes, Nomad, Docker Swarm e OpenShift.\n","date":"Aug 08","permalink":"https://sergsoares.github.io/posts/2022-08-08-o-que-e-um-orquestrador-de-containers/","tags":null,"title":"O que √© um orquestrador de containers ?"},{"categories":["rancher"],"contents":"O Rancher Desktop √© uma aplica√ß√£o multiplataforma feita pela SUSE que fornece mecanismos para gest√£o de containers e uma interface gr√°fica para\na instala√ß√£o de um cluster Kubernetes local.\nAs principais facilidades de utilizar o Rancher Desktop:\nO pacote de instala√ß√£o j√° instala o Nerdctl para gest√£o das imagens e execu√ß√£o dos containers. Permite que as imagens criadas j√° sejam utilizadas dentro do Kubernetes. Permite implantar um cluster de Kubernetes utilizando a distribui√ß√£o K3S sendo poss√≠vel escolher a vers√£o que se desejada instalar atrav√©s da interface gr√°fica. O fluxo para iniciar e finalizar o sistema n√£o tem necessidade de scripts. J√° instala um dashboard para o Kubernetes local. Possui uma ferramenta visual para cria√ß√£o de redirecionamento de porta entre o cluster o ambiente local. Cria o cluster com um ingress controller o Traefik, facilitando a exposi√ß√£o dos servi√ßos. Efetua a cria√ß√£o de uma m√°quina virtual no MacOs e Windows de maneira transparente, sem necessidade de instala√ß√£o de componentes extras. A documenta√ß√£o do Rancher Desktop √© completa e conta com diversos tutoriais para se criar aplica√ß√µes utilizando o cluster Kubernetes provisionado e a integra√ß√£o com outras aplica√ß√µes.\n","date":"Aug 05","permalink":"https://sergsoares.github.io/posts/2022-08-05-o-que-e-o-rancher-desktop/","tags":null,"title":"O que √© o Rancher Desktop ?"},{"categories":["oci","container"],"contents":"Creio que j√° viu em blogs t√©cnicos, documenta√ß√µes e posts no dia a dia de trabalho o termo OCI sempre relacionado a docker e containers, mas o que de fato √© OCI e como ele tem rela√ß√£o com docker/containers ?\nOCI √© a sigla para Open Container Initiative que seria uma organiza√ß√£o criada por empresas relacionados a tecnologia de container como a Docker, Inc (empresa por tr√°s da ferramenta docker) e que tem como objetivo prover um padr√£o para:\nEspecifica√ß√£o do runtime (ambiente de execu√ß√£o) dos containers. Especifica√ß√£o para o padr√£o de images que deve ser utilizado. O foco seria garantir a interoperabilidade de images criadas por outras ferramentas que seguem o padr√£o OCI permitindo que images criadas com docker possa ser utilizadas em outros container engines como podman por exemplo.\nPara obter mais informa√ß√µes, √© poss√≠vel consultar o site do Open Container Initiative.\n","date":"Aug 04","permalink":"https://sergsoares.github.io/posts/2022-08-04-o-que-oci-tem-a-ver-com-a-ver-com-containers/","tags":null,"title":"O que OCI tem a ver com a ver com containers ?"},{"categories":["podman","container"],"contents":"O Podman √© uma ferramenta de linha de comando para execu√ß√£o de containers, sendo uma alternativa ao docker, mas quais s√£o suas principais caracter√≠sticas?\nDaemonless - O Docker √© uma ferramenta que precisa ser instalada com privil√©gios de usu√°rio root, enquanto o podman por ser daemonless n√£o precisa desses mesmos privil√©gios facilitando o seu uso.\nRootless - O podman aplica o conceito de rootless para a execu√ß√£o dos seus containers reduzindo a superf√≠cie de ataque atrav√©s de um container infectado ao host, atualmente j√° temos o suporte no docker nas novas vers√µes.\nVale a pena tamb√©m olha a a documenta√ß√£o do podman que conta com excelentes explica√ß√µes a respeito do uso de containers e dos conceitos envolvidos.\n","date":"Aug 03","permalink":"https://sergsoares.github.io/posts/2022-08-03-por-que-usar-o-podman-se-temos-o-docker/","tags":null,"title":"Por que usar o podman se temos o Docker ?"},{"categories":["packer"],"contents":"We have several options to discover an AMI id to use in infra as code resources, but with Packer from Hashicorp it is simple as define a block that will recover based on a pattern the id.\nAbove the solution using filter to restore latest image id for a ubuntu 20.04 version.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 source \u0026#34;amazon-ebs\u0026#34; \u0026#34;ubuntu\u0026#34; { ami_name = \u0026#34;azure-agent-image-v0.1\u0026#34; instance_type = \u0026#34;t3.micro\u0026#34; region = \u0026#34;eu-west-2\u0026#34; source_ami_filter { filters = { name = \u0026#34;ubuntu/images/*ubuntu-*-20.04-amd64-server-*\u0026#34; root-device-type = \u0026#34;ebs\u0026#34; virtualization-type = \u0026#34;hvm\u0026#34; } most_recent = true owners = [\u0026#34;099720109477\u0026#34;] } ssh_username = \u0026#34;ubuntu\u0026#34; } References https://lgallardo.com/2018/01/25/how-to-get-the-latest-ubuntu-ami/ https://blog.gruntwork.io/locating-aws-ami-owner-id-and-image-name-for-packer-builds-7616fe46b49a ","date":"Mar 30","permalink":"https://sergsoares.github.io/posts/2022-03-30-restoring/","tags":null,"title":"Restoring AMI with Packer"},{"categories":["security"],"contents":"Today with digital products that interact in our day to day increasing the number of security assets that we need to manage is increasing too (password, key files, 2FA components).\nAnd if you are part of a critical infrastructure role or you have ownership inside a company, there are more items and in some cases more critical.\nSome items that can be need managed and exists in multiple contexts (company tenant\u0026rsquo;s, work/personal).\nSSH Keys (Github, Hosts) Cloud 2FA Financial 2FA Crypto 2FA Password Management (Password and other auth methods like files) Email (Proton/Gmail/Outlook) Internal Admin systems (Active Directory) Password for Smartphones Hardware wallets ","date":"Mar 15","permalink":"https://sergsoares.github.io/posts/2022-03-15-more-digital-products-more-security-assets/","tags":null,"title":"More digital products, more security assets"},{"categories":["technical"],"contents":"A list of great technical blogs of companies and organizations that write about sre, kubernetes and other infrastructure topics, it will be updated.\nhttps://sensu.io/blog/ https://www.metricfire.com/blog/ https://sysdig.com/blog/ https://containerjournal.com/ https://tailscale.com/blog/ https://blog.replit.com/ https://www.observability.blog/ https://grafana.com/categories/engineering/ https://www.sentinelone.com/blog/ https://openmetrics.io/ https://fly.io/blog/ https://slack.engineering/ https://www.weave.works/blog/ https://www.padok.fr/en/blog/ https://blog.logrocket.com/ https://www.cncf.io/blog ","date":"Mar 11","permalink":"https://sergsoares.github.io/posts/2022-03-11-technical-blogs-for-sre-infra/","tags":["technical"],"title":"Technical blogs for SRE/Infra"},{"categories":["reflection"],"contents":"As become experienced we start discuss and dialogue with ourself about methodologies and practices.\nWhat we learn touch the reality but with several new and not expected variables, that makes us rethink based on that specific use case.\nIt lead us to change ideas, plans and decisions because we then learn that neither everything can be solved use same tactics and it bring a lot of new challenge that make us enjoy more the process.\n","date":"Mar 02","permalink":"https://sergsoares.github.io/posts/2022-03-02-more-experience-give-us-less-certainties/","tags":null,"title":"More experience give us less certainties"},{"categories":["linux"],"contents":"Each distro in linux can have different paths for install applications, but a good generic option seems:\n/opt/\u0026lt;app_folder\u0026gt;/\u0026lt;executable\u0026gt; https://unix.stackexchange.com/questions/127076/into-which-directory-should-i-install-programs-in-linux ","date":"Mar 01","permalink":"https://sergsoares.github.io/posts/2022-03-01-best-generic-folder-for-linux-apps/","tags":null,"title":"Best generic folder for linux apps"},{"categories":null,"contents":" Test Errors be part of our day work at tech, but working with open source facilitate a lot, tools like terraform show us that community has power.\nAt work today received the below error in a \u0026ldquo;terraform plan\u0026rdquo;:\nStack trace from the terraform-provider-aws_v3.74.0_x5 plugin: panic: interface conversion: interface {} is nil, not *conns.AWSClient And with a fast search I found a¬†Github Issue in Terraform¬†recommending update Terraform version.\nErrors are not cool, but solved issues are.\nBetter yet using¬†Arkade¬†it was an easy activity only doing:\narkade get terraform@1.0.9 And went back to my main activity.\n","date":"Mar 01","permalink":"https://sergsoares.github.io/posts/2022-03-01-solved-issues-are-great-in-open-source/","tags":["terraform","oss"],"title":"Solved issues are great in open source terraform"},{"categories":["docker"],"contents":"Sempre achei interessante a ideia de rodar aplica√ß√µes gr√°ficas utilizando container e poder facilitar a replica√ß√£o delas em diferentes locais.\nPesquisando anos atr√°s formas de utilizar o docker para esse fim vi posts excelentes como do Somat√≥rio - Rodando aplica√ß√µes GUI em Docker e da Jessie - Docker Containers on the Desktop.\nEntretanto esses cen√°rios s√£o para aplica√ß√µes espec√≠ficas, n√£o para o ambiente de trabalho inteiro, recentemente pesquisando formas criar um home lab privado e implica√ß√µes de seguran√ßa pensei em criar uma VM com interface gr√°fica na cloud:\nRunning Ubuntu Desktop GUI (AWS EC2 Instance) on Windows Your desktop on Google Cloud Platform Por√©m o que mais me surpreendeu foi o Running GUI apps securely in docker (sandbox) que tem um reposit√≥rio docker-ubuntu-vnc-desktop muito bem organizado e tr√°s como uma op√ß√£o criar um container com ambiente gr√°fico Lxde/Lxqt.\nNos testes tanto local quanto em uma VM na GCP funcionou muito bem a navega√ß√£o e edi√ß√£o de c√≥digo atrav√©s dele, o docker in docker funcionou normalmente e ajustando a configura√ß√£o de resolu√ß√£o permitiu ter uma experi√™ncia agrad√°vel de uso no VNC Viewer\nPretendo criar um fork do projeto e customizar a image para usos pr√≥prios.\n","date":"Apr 26","permalink":"https://sergsoares.github.io/posts/2020-04-26-example-post-3/","tags":null,"title":"Como utilizar docker como ambiente de trabalho"},{"categories":["side-project"],"contents":"Keep an personal blog is common in IT but beyond expose yourself to others and increase your visibility it improve our write skills, tecnical learning and help others with tips/insights.\nIn a past i already try write with frequency but fall in the side-project trap:\nThe main points to avoid fall in this trap again:\nKeep blog simple and focus in content Small and simple posts to gain cadency Talk about work insights and problems solved Trying again this habit, using Hugo a static generator really fast made in Go and starting from Minimal template created by Lukas Joswiak.\n","date":"Apr 26","permalink":"https://sergsoares.github.io/posts/2020-04-26-example-post-2/","tags":null,"title":"Doing exposes reality"},{"categories":null,"contents":" Nya nya nyan meow meow mama More napping, more napping all the napping is exhausting stretch out on bed you are a captive audience while sitting on the toilet, pet me slap the dog because cats rule bleghbleghvomit my furball really tie the room together always hungry. Humans,humans, humans oh how much they love us felines we are the center of attention they feed, they clean miaow then turn around and show you my bum. Cats secretly make all the worlds muffins slap owner\u0026rsquo;s face at 5am until human fills food dish, milk the cow hunt by meowing loudly at 5am next to human slave food dispenser throwup on your pillow. Get scared by doggo also cucumerro .\nCat is meow meow Sees bird in air, breaks into cage and attacks creature when in doubt, wash spend six hours per day washing, but still have a crusty butthole yet lick sellotape tickle my belly at your own peril i will pester for food when you\u0026rsquo;re in the kitchen even if it\u0026rsquo;s salad find box a little too small and curl up with fur hanging out.\nClaw at curtains stretch and yawn nibble on tuna ignore human bite human hand. Under the bed mice yet funny little cat chirrup noise shaking upright tail when standing next to you but white cat sleeps on a black shirt for eat an easter feather as if it were a bird then burp victoriously.\nHas closed eyes but still sees you present belly scratch hand when stroked for is good you understand your place in my world get scared by sudden appearance of cucumber. What the heck just happened, something feels fishy chew master\u0026rsquo;s slippers yet brown cats with pink ears bite the neighbor\u0026rsquo;s bratty kid cereal boxes make for five star accommodation but i like to spend my days sleeping and eating fishes that my human fished for me we live on a luxurious yacht, sailing proudly under the sun, i like to walk on the deck, watching the horizon, dreaming of a good bowl of milk. Lounge in doorway put butt in owner\u0026rsquo;s face, or ptracy destroy house in 5 seconds. Mrow no, you can\u0026rsquo;t close the door, i haven\u0026rsquo;t decided whether or not i wanna go out is good you understand your place in my world.\nBrown cats with pink ears shred all toilet paper and spread around the house being gorgeous with belly side up. Cats go for world domination the best thing in the universe is a cardboard box cats are cute so meow all night having their mate disturbing sleeping humans. Nya nya nyan annoy owner until he gives you food say meow repeatedly until belly rubs, feels good eat the fat cats food but meowing non stop for food. Pet right here, no not there, here, no fool, right here that other cat smells funny you should really give me all the treats because i smell the best and omg you finally got the right spot and i love you right now see brother cat receive pets, attack out of jealousy. Headbutt owner\u0026rsquo;s knee love blinks and purr purr purr purr yawn for stand in front of the computer screen, or mew mew for human is washing you why halp oh the horror flee scratch hiss bite.\nCats making all the muffins Cats making all the muffins asdflkjaertvlkjasntvkjn (sits on keyboard) so the dog smells bad but cough hairball on conveniently placed pants and show belly but loved it, hated it, loved it, hated it catch mouse and gave it as a present. Give me attention or face the wrath of my claws meow all night for love me! and love you, then bite you or mesmerizing birds. Lick human with sandpaper tongue. Murf pratt ungow ungow scratch the box sit in box and to pet a cat, rub its belly, endure blood and agony, quietly weep, keep rubbing belly wake up human for food at 4am or eat owner\u0026rsquo;s food trip owner up in kitchen i want food. Curl up and sleep on the freshly laundered towels paw at your fat belly, steal mom\u0026rsquo;s crouton while she is in the bathroom yet nyan nyan goes the cat, scraaaaape scraaaape goes the walls when the cat murders them with its claws milk the cow suddenly go on wild-eyed crazy rampage toy mouse squeak roll over.\nHunt by meowing loudly at 5am next to human slave food dispenser hate dog reward the chosen human with a slow blink. Cat dog hate mouse eat string barf pillow no baths hate everything miaow then turn around and show you my bum love fish, and kitty scratches couch bad kitty steal the warm chair right after you get up kitty poochy munch on tasty moths. Take a big fluffing crap üí© scratch at fleas, meow until belly rubs, hide behind curtain when vacuum cleaner is on scratch strangers and poo on owners food i rule on my back you rub my tummy i bite you hard.\nThanks by cats.\n","date":"Mar 09","permalink":"https://sergsoares.github.io/posts/example-load/","tags":["markdown","text","image"],"title":"Example Lazy Load Image"},{"categories":null,"contents":"","date":"Jan 01","permalink":"https://sergsoares.github.io/articles/","tags":null,"title":"Articles"}]